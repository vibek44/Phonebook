(this.webpackJsonpphonebookfrontend=this.webpackJsonpphonebookfrontend||[]).push([[0],{15:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(16),o=n.n(c),u=n(1),s=n(4),i=n(0),b=function(e){var t=e.person,n=e.deletePerson;return Object(i.jsxs)("p",{children:[t.name," ",t.number,Object(i.jsx)("button",{onClick:n,children:"delete"})]})},l=function(e){var t=e.value,n=e.handleFiltered;return Object(i.jsxs)(i.Fragment,{children:["Filter shown with ",Object(i.jsx)("input",{value:t,onChange:n})]})},j=function(e){return Object(i.jsxs)("form",{onSubmit:e.addPerson,children:[Object(i.jsxs)("div",{children:["Name: ",Object(i.jsx)("input",{value:e.valuename,onChange:e.handlePersonInput})]}),Object(i.jsxs)("div",{children:["Number: ",Object(i.jsx)("input",{type:"number",value:e.valuenumber,onChange:e.handlePersonNumber})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},d=n(5),m=n.n(d),f="http://localhost:3001/api/persons",O={getAll:function(){return m.a.get(f).then((function(e){return e.data}))},create:function(e){return m.a.post(f,e).then((function(e){return e.data}))},remove:function(e){return m.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return m.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))}},h=function(e){var t=e.notification;return null===t.message&&null===t.errormessage?null:t.message?Object(i.jsx)("p",{className:"notification",children:t.message}):Object(i.jsx)("p",{className:"error",children:t.errormessage})},p=(n(15),function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(s.a)(c,2),d=o[0],m=o[1],f=Object(r.useState)(""),p=Object(s.a)(f,2),v=p[0],g=p[1],x=Object(r.useState)(""),w=Object(s.a)(x,2),C=w[0],P=w[1],k=Object(r.useState)({message:null,errormessage:null}),N=Object(s.a)(k,2),S=N[0],y=N[1],A=n.filter((function(e){return e.name.toUpperCase().includes(C.toUpperCase())}));Object(r.useEffect)((function(){O.getAll().then((function(e){return a(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Phonebook"}),Object(i.jsx)(h,{notification:S}),Object(i.jsx)(l,{value:C,handleFiltered:function(e){return P(e.target.value)}}),Object(i.jsx)("h2",{children:"Add new contact"}),Object(i.jsx)(j,{addPerson:function(e){if(e.preventDefault(),d&&v)if(n.some((function(e){return e.name.toLowerCase()===d.trim().toLowerCase()}))){alert("".concat(d," is already added to phonebook,Replace old number with new"));var t=n.find((function(e){return e.name.toLowerCase()===d.trim().toLowerCase()})),r=Object(u.a)(Object(u.a)({},t),{},{number:v});O.update(t.id,r).then((function(e){a(n.map((function(n){return t.id!==n.id?n:e}))),m(""),g(""),y(Object(u.a)(Object(u.a)({},S),{},{message:"changed number from ".concat(t.number," to ").concat(e.number)})),setTimeout((function(){y(Object(u.a)(Object(u.a)({},S),{},{message:null}))}),5e3)})).catch((function(e){y(Object(u.a)(Object(u.a)({},S),{},{errormessage:"Information of ".concat(d," has been removed")}))}))}else{var c={name:d,number:v};O.create(c).then((function(e){a(n.concat(e)),y(Object(u.a)(Object(u.a)({},S),{},{message:"Added ".concat(c.name)})),m(""),g(""),setTimeout((function(){y(Object(u.a)(Object(u.a)({},S),{},{message:null}))}),5e3)}))}else y(Object(u.a)(Object(u.a)({},S),{},{errormessage:"name or number is missing"}))},valuename:d,valuenumber:v,handlePersonInput:function(e){return m(e.target.value)},handlePersonNumber:function(e){return g(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),A.map((function(e){return Object(i.jsx)(b,{person:e,deletePerson:function(){return t=e.id,r=e.name,window.confirm("Delete ".concat(r," ?")),O.remove(t),y(Object(u.a)(Object(u.a)({},S),{},{message:"Removed ".concat(r)})),setTimeout((function(){y(Object(u.a)(Object(u.a)({},S),{},{message:null}))}),3e3),void a(n.filter((function(e){return t!==e.id})));var t,r}},e.id)}))]})});o.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(p,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.a2192013.chunk.js.map